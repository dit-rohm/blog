<!DOCTYPE html> <html lang=ja> <head> <meta charset=utf-8> <meta http-equiv=X-UA-Compatible content='IE=edge'> <meta name=viewport content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"> <title>GMOクラウドのVPSにDebian 8 (jessie)をインストールした話 - DIT Mentor Blog</title> <meta name=keywords content="Debian,Linux,VPS"> <meta name=description content="GMOクラウドのVPSにDebian 8 (jessie)をインストールしてベンチマークもとってみました．"> <meta property="og:site_name" content="DIT Mentor Blog"> <meta property="og:title" content="GMOクラウドのVPSにDebian 8 (jessie)をインストールした話"> <meta property="og:description" content="GMOクラウドのVPSにDebian 8 (jessie)をインストールしてベンチマークもとってみました．"> <meta property="og:type" content=article> <meta property="og:url" content="https://blog.dit-rohm.com/2015/06/23/install-debian-jessie-to-gmo-vps.html"> <meta property="og:image" content="https://farm1.staticflickr.com/104/299949769_3ae460698f_o.jpg"> <meta property="fb:app_id" content=866054163477643> <meta name="twitter:card" content=summary_large_image> <meta name="twitter:site" content="@dit_rohm"> <link href="/images/favicon.png" rel=icon type="image/png"/> <link rel=alternate type="application/atom+xml" title="Atom Feed" href="/feed.xml"/> <link href="/stylesheets/blog.css" rel=stylesheet /> <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-61361620-3', 'auto');
  ga('send', 'pageview');
</script> </head> <body> <header class=blog_header> <nav class="navbar navbar-default navbar-fixed-top"> <div class=container-fluid> <div class=navbar-header> <button type=button class=navbar-toggle data-toggle=collapse data-target="#bs-example-navbar-collapse-1"> <span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a class=navbar-brand href="https://dit-rohm.com/">DIT</a> </div> <div class="collapse navbar-collapse" id=bs-example-navbar-collapse-1> <ul class="nav navbar-nav"> <li class=active><a href="/">Blog Home</a></li> <li class=dropdown> <a href="#" class=dropdown-toggle data-toggle=dropdown>Tags <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href="/tags/Debian.html">Debian</a> </li> <li> <a href="/tags/Linux.html">Linux</a> </li> <li> <a href="/tags/VPS.html">VPS</a> </li> <li> <a href="/tags/アプリ.html">アプリ</a> </li> <li> <a href="/tags/カメラ.html">カメラ</a> </li> <li> <a href="/tags/音楽.html">音楽</a> </li> </ul> </li> <li class=dropdown> <a href="#" class=dropdown-toggle data-toggle=dropdown>Archives <b class=caret></b></a> <ul class=dropdown-menu role=menu> <li role=presentation class=dropdown-header>2015年</li> <li><a href="/2015/11.html">11月</a></li> <li><a href="/2015/08.html">08月</a></li> <li><a href="/2015/07.html">07月</a></li> <li><a href="/2015/06.html">06月</a></li> <li><a href="/2015/05.html">05月</a></li> </ul> </li> </ul> </div> </div> </nav> <div class="jumbotron top-catch"> <h1 class=midashi-en><a href="/">DIT Mentor Blog</a></h1> <hr class=header-hr> <h5 class=midashi-ja>DITメンターブログ</h5> </div> </header> <div id=main role=main> <div class=container> <div class=row> <div class=col-sm-1> </div> <div class=col-sm-2> <p class=tags>Tags</p> <ul class=article-tag> <li><a href="/tags/debian.html">Debian</a></li> </ul> <ul class=article-tag> <li><a href="/tags/linux.html">Linux</a></li> </ul> <ul class=article-tag> <li><a href="/tags/vps.html">VPS</a></li> </ul> </div> <div class="col-sm-7 post"> <h1 class=article-title>GMOクラウドのVPSにDebian 8 (jessie)をインストールした話</h1> <p class=article-date>2015/06/23</p> <hr> <h1>GMOクラウドのVPSにDebian 8 (jessie)をインストールした話</h1> <p>こんにちは，（´・ω・） ｽの人です． 今回は「GMOクラウドのVPSにDebian 8 (jessie)をインストールした話」ということで，GMOクラウドのVPSにDebian jessieをインストールしつつベンチマークスコアを計測しました．</p> <h2>GMOクラウドのVPS</h2> <p>GMOインターネットの子会社であるGMOクラウドが提供するVPSサービスです． 最近のプレスリリースでは「国内最安級の1GBプラン」「SLA99.99％」と最安値・高品質を謳っているようです．</p> <h3>国内最安級は伊達じゃない</h3> <p>OpenVZ系を除く国内外の有名どころが提供するメモリー4GBのプランをいくつか表にまとめました． メモリー1GBのプランが国内最安級であるかどうかはさておき，4GBのプランでは明らかに安価なグループに含まれます． （検閲により削除されました）なコンテンツを配信できるVPSとしては間違いなく国内最安級でしょう．</p> <table><thead> <tr> <th style="text-align: center"></th> <th style="text-align: center">CPU</th> <th style="text-align: center">Memory</th> <th style="text-align: center">Storage</th> <th style="text-align: center">Transfer</th> <th style="text-align: center">Price</th> </tr> </thead><tbody> <tr> <td style="text-align: center"><a title=Vultr href="http://www.vultr.com/?ref=6842870">Vultr</a></td> <td style="text-align: center">2</td> <td style="text-align: center">4 GB</td> <td style="text-align: center">SSD: 90 GB</td> <td style="text-align: center">4 TB</td> <td style="text-align: center">$40</td> </tr> <tr> <td style="text-align: center"><a title=DigitalOcean href="https://www.digitalocean.com/?refcode=72e64693e334">DigitalOcean</a></td> <td style="text-align: center">2</td> <td style="text-align: center">4 GB</td> <td style="text-align: center">SSD: 60 GB</td> <td style="text-align: center">4 TB</td> <td style="text-align: center">$40</td> </tr> <tr> <td style="text-align: center"><a title="お名前.com VPS" href="http://px.a8.net/svt/ejp?a8mat=2HSAZJ+EWFKTU+50+35KNCY">お名前.com VPS</a></td> <td style="text-align: center">4</td> <td style="text-align: center">4 GB</td> <td style="text-align: center">HDD: 400 GB</td> <td style="text-align: center">-</td> <td style="text-align: center">¥3696</td> </tr> <tr> <td style="text-align: center"><a title="さくらのVPS" href="http://px.a8.net/svt/ejp?a8mat=2HSAZJ+C37VZM+D8Y+BWVTE">さくらのVPS</a></td> <td style="text-align: center">4</td> <td style="text-align: center">4 GB</td> <td style="text-align: center">SSD: 100 GB / HDD: 400 GB</td> <td style="text-align: center">-</td> <td style="text-align: center">¥3600</td> </tr> <tr> <td style="text-align: center"><a title=ConoHa href="https://www.conoha.jp/referral/?token=xj7pqnWOX_JUrYOd7lS369L_7N.JvUj_T7CwbuqgoNkOYxCZvhg-KWQ">ConoHa</a></td> <td style="text-align: center">4</td> <td style="text-align: center">4 GB</td> <td style="text-align: center">SSD: 50 GB</td> <td style="text-align: center">-</td> <td style="text-align: center">¥3420</td> </tr> <tr> <td style="text-align: center"><a title="GMOクラウドのVPS" href="http://px.a8.net/svt/ejp?a8mat=2HSAZJ+C5LMEQ+2KX0+5YJRM">GMOクラウドのVPS</a></td> <td style="text-align: center">4</td> <td style="text-align: center">4 GB</td> <td style="text-align: center">HDD: 200 GB</td> <td style="text-align: center">-</td> <td style="text-align: center">¥2380</td> </tr> </tbody></table> <h3>長所</h3> <ul> <li>CPUの性能が優れている（DigitalOcean &lt; さくらのVPS &lt; GMOクラウドのVPS）</li> <li>安価（OpenVZ系を除く）</li> </ul> <h3>短所</h3> <ul> <li>VPSコンソール(Web UI)のレスポンスが悪い</li> <li>ディスクI/Oが遅い(HDDとSSDと比べれば当然の話ですが)</li> <li>用意されたOSイメージが古い(Debian 6.0 / Ubuntu 12.04)</li> <li>起動順位の闇</li> </ul> <h4>VPSコンソールのレスポンスが悪い</h4> <p><a href="2015-06-23/gmo-vps-1.png"><img alt="VPSコンソール" src="/images/2015-06-23/gmo-vps-1.png"/></a></p> <p>契約しているVPSの一覧を取得するのに10秒以上かかる時があるなど全ての操作がモッサリしているように感じました． ストレスフルなWUIを本当にありがとうございました． VPSを操作するためのAPIが公開されればもう少し便利になるかもしれません．</p> <h4>起動順位の闇</h4> <p><a href="2015-06-23/gmo-vps-2.png"><img alt=BIOS src="/images/2015-06-23/gmo-vps-2.png"/></a></p> <p>GMOクラウドのVPSではシステムやデータ用の1番目ストレージとSWAP専用の2番目のストレージが提供されます． 1番目もしくは2番目のストレージのMBRからブートローダーが起動すると思いきや，どちらを上書きしたとしてもデフォルトでは起動しません． 今回契約したDebian 6.0のプランでは，起動デバイスを明示していない時GRUB 0.9xが起動します． GRUB Legacyの設定ファイルを生成するか，起動時にF12キーを押してハードディスクからの起動を明示する必要があります．</p> <h2>ベンチマーク</h2> <p>インストール記事なのにベンチマークスコアを計測してみました． というのも，「GMOクラウドのVPSのCPUはそこそこ良いけど，ディスクI/Oはよろしくない」という話を見聞きしたからです． 事実，体感できるほどにディスクI/Oは遅いです．これはSSDに慣れてしまうと厳しい．</p> <h3>UnixBench</h3> <table><thead> <tr> <th style="text-align: center">System Benchmarks Index Values</th> <th style="text-align: center">Digital Ocean</th> <th style="text-align: center">さくらのVPS</th> <th style="text-align: center">GMOクラウドのVPS</th> </tr> </thead><tbody> <tr> <td style="text-align: center">Dhrystone 2 using register variables</td> <td style="text-align: center">3988.6</td> <td style="text-align: center">3524</td> <td style="text-align: center">6871</td> </tr> <tr> <td style="text-align: center">Double-Precision Whetstone</td> <td style="text-align: center">1130.5</td> <td style="text-align: center">1182.6</td> <td style="text-align: center">1716.4</td> </tr> <tr> <td style="text-align: center">Execl Throughput</td> <td style="text-align: center">1532</td> <td style="text-align: center">1716</td> <td style="text-align: center">2360.5</td> </tr> <tr> <td style="text-align: center">File Copy 1024 bufsize 2000 maxblocks</td> <td style="text-align: center">2148.8</td> <td style="text-align: center">2351.1</td> <td style="text-align: center">685.2</td> </tr> <tr> <td style="text-align: center">File Copy 256 bufsize 500 maxblocks</td> <td style="text-align: center">1352.5</td> <td style="text-align: center">1572.9</td> <td style="text-align: center">529.8</td> </tr> <tr> <td style="text-align: center">File Copy 4096 bufsize 8000 maxblocks</td> <td style="text-align: center">3693.2</td> <td style="text-align: center">2963.3</td> <td style="text-align: center">1231.3</td> </tr> <tr> <td style="text-align: center">Pipe Throughput</td> <td style="text-align: center">2558.9</td> <td style="text-align: center">2455.5</td> <td style="text-align: center">4563.5</td> </tr> <tr> <td style="text-align: center">Pipe-based Context Switching</td> <td style="text-align: center">1330</td> <td style="text-align: center">1081.4</td> <td style="text-align: center">2187.5</td> </tr> <tr> <td style="text-align: center">Process Creation</td> <td style="text-align: center">1229.2</td> <td style="text-align: center">1237.4</td> <td style="text-align: center">2607</td> </tr> <tr> <td style="text-align: center">Shell Scripts (1 concurrent)</td> <td style="text-align: center">1991.9</td> <td style="text-align: center">1070.3</td> <td style="text-align: center">3558</td> </tr> <tr> <td style="text-align: center">Shell Scripts (8 concurrent)</td> <td style="text-align: center">2808.1</td> <td style="text-align: center">1087.2</td> <td style="text-align: center">3228.6</td> </tr> <tr> <td style="text-align: center">System Call Overhead</td> <td style="text-align: center">2775.8</td> <td style="text-align: center">2820.7</td> <td style="text-align: center">2453.6</td> </tr> </tbody></table> <p><a href="2015-06-23/gmo-vps-3.png"><img alt=UnixBench src="/images/2015-06-23/gmo-vps-3.png"/></a></p> <h3>Oracle ORION</h3> <p>GMOクラウドのVPSは負荷にかかわらず40Mbps 〜 60Mbpsでした． Digital OceanやさくらのVPSの10分の1程度． HDDなら仕様がない…</p> <table><thead> <tr> <th style="text-align: center">Large/Small</th> <th style="text-align: center">Digital Ocean</th> <th style="text-align: center">さくらのVPS</th> </tr> </thead><tbody> <tr> <td style="text-align: center">1</td> <td style="text-align: center">662.22</td> <td style="text-align: center">609.05</td> </tr> <tr> <td style="text-align: center">2</td> <td style="text-align: center">473.23</td> <td style="text-align: center">412.57</td> </tr> <tr> <td style="text-align: center">3</td> <td style="text-align: center">416.46</td> <td style="text-align: center">374.34</td> </tr> <tr> <td style="text-align: center">4</td> <td style="text-align: center">410.09</td> <td style="text-align: center">345.37</td> </tr> <tr> <td style="text-align: center">5</td> <td style="text-align: center">350.12</td> <td style="text-align: center">325.63</td> </tr> <tr> <td style="text-align: center">6</td> <td style="text-align: center">347.13</td> <td style="text-align: center">323.59</td> </tr> <tr> <td style="text-align: center">7</td> <td style="text-align: center">321.24</td> <td style="text-align: center">313.16</td> </tr> <tr> <td style="text-align: center">8</td> <td style="text-align: center">306.63</td> <td style="text-align: center">312.07</td> </tr> <tr> <td style="text-align: center">9</td> <td style="text-align: center">286.84</td> <td style="text-align: center">304.61</td> </tr> <tr> <td style="text-align: center">10</td> <td style="text-align: center">299.53</td> <td style="text-align: center">299.25</td> </tr> </tbody></table> <h2>インストール</h2> <p>ブートローダーの挙動が何やらおかしいのでGMOクラウドのVPSに手動でOSをインストールすることはオススメいたしかねます． それでもインストールを進める方は以下をご覧下さい．</p> <p>コントロールパネルからサブネットマスクやゲートウェイのアドレスを確認できないので， 生成されたネットワークのconfigファイルを再起動する前に必ず確認しましょう．</p> <pre class="highlight shell"><code>cat /etc/network/interfaces

<span class="c"># Automatically generated by GMO Cloud Public</span>
auto lo
iface lo inet loopback

auto eth0
iface eth0 inet static
    address XXX.XXX.XXX.XXX
    netmask XXX.XXX.XXX.XXX
    broadcast XXX.XXX.XXX.XXX
    network XXX.XXX.XXX.XXX
    gateway XXX.XXX.XXX.XXX

swapoff /dev/sdb
cfdisk /dev/sdb
mkfs.ext2 /dev/sdb1
mkdir jessie
mount /dev/sdb1 jessie
<span class="nb">cd </span>jessie
wget http://cdimage.debian.or.jp/8.1.0/amd64/iso-cd/debian-8.1.0-amd64-netinst.iso
wget http://ftp.tsukuba.wide.ad.jp/debian/dists/jessie/main/installer-amd64/current/images/hd-media/initrd.gz
wget http://ftp.tsukuba.wide.ad.jp/debian/dists/jessie/main/installer-amd64/current/images/hd-media/vmlinuz
nano /boot/grub/menu.lst

title  jessie
root   <span class="o">(</span>hd1,0<span class="o">)</span>
kernel /vmlinuz
initrd /initrd.gz

reboot
</code></pre> <h2>まとめ</h2> <p>GMOクラウドのVPSにDebian 8 (jessie)をインストールしましたが， 突然ストレージのサイズが1GBになったり，コントロールパネルから一切の操作を受け付けなくなったり， 色々とえらいことになりました． 何かしら別のOSをインストールしたい方は， ISOからのインストールに対応しているサービスを使用することを強く推奨します．</p> <p>世の中には様々なVPSやパブリッククラウドが存在します． 自分が何をしたいのかを明確にして，最も適したサービスを選ぶようにしましょう． どれにも満足できなければオンプレでも…</p> <h2>参考文献</h2> <ol> <li><a title="4.4. ハードディスク起動ファイルの準備" href="https://www.debian.org/releases/stable/amd64/ch04s04.html.ja">4.4. ハードディスク起動ファイルの準備</a></li> <li><a title="5.1. 64-bit PC でのインストーラの起動" href="https://www.debian.org/releases/stable/amd64/ch05s01.html.ja">5.1. 64-bit PC でのインストーラの起動</a></li> </ol> <p><img src="http://www13.a8.net/0.gif?a8mat=2HSAZJ+C5LMEQ+2KX0+5YJRM"/> <img src="http://www11.a8.net/0.gif?a8mat=2HSAZJ+EWFKTU+50+35KNCY"/> <img src="http://www11.a8.net/0.gif?a8mat=2HSAZJ+C37VZM+D8Y+BWVTE"/></p> </div> <div class=col-sm-2> </div> </div> </div> </div> <div class="social-buttons clearfix"> <ul> <li> <a href="https://twitter.com/share" class=twitter-share-button data-url="https://blog.dit-rohm.com/2015/06/23/install-debian-jessie-to-gmo-vps.html" data-via=dit_rohm data-related=dit_rohm>Tweet</a> </li> <li> <div class=fb-share-button data-href="https://blog.dit-rohm.com/2015/06/23/install-debian-jessie-to-gmo-vps.html" data-layout=button_count></div> </li> <li> <a data-pocket-label=pocket data-pocket-count=horizontal class=pocket-btn data-lang=en></a> </li> <li> <a href="https://b.hatena.ne.jp/entry/https://blog.dit-rohm.com/2015/06/23/install-debian-jessie-to-gmo-vps.html" class=hatena-bookmark-button data-hatena-bookmark-title="GMOクラウドのVPSにDebian 8 (jessie)をインストールした話 - dit" data-hatena-bookmark-layout=standard-balloon data-hatena-bookmark-lang=ja title="このエントリーをはてなブックマークに追加"> <img src="https://b.st-hatena.com/images/entry-button/button-only.png" alt="このエントリーをはてなブックマークに追加" width=20 height=20 style="border: none;"/></a> </li> </ul> </div> <footer class=blog_footer> <div class="inner container"> <div class=row> <div class="col-md-4 col-sm-6 footer-content"> <h3>Recent Post</h3> <ul> <li><p class=post-date><time datetime="2015-11-17T17:43">2015/11/17</time></p> <p class=post-title><a href="/2015/11/17/recurrent-neural-network.html">ディープラーニングで講義のレポートを自動執筆</a></p></li> </ul> <ul> <li><p class=post-date><time datetime="2015-11-10T21:00">2015/11/10</time></p> <p class=post-title><a href="/2015/11/10/hackathon.html">初心者がハッカソンに参加してみた結果</a></p></li> </ul> <ul> <li><p class=post-date><time datetime="2015-08-13T00:00">2015/08/13</time></p> <p class=post-title><a href="/2015/08/13/IP.html">知っておくべき知的財産権　著作権</a></p></li> </ul> <ul> <li><p class=post-date><time datetime="2015-08-06T21:13">2015/08/06</time></p> <p class=post-title><a href="/2015/08/06/bilingual-news.html">バイリンガルニュースのおすすめ回6選</a></p></li> </ul> <ul> <li><p class=post-date><time datetime="2015-07-28T10:00">2015/07/28</time></p> <p class=post-title><a href="/2015/07/28/on-the-train.html">通学中の暇つぶしにおすすめなこと15選</a></p></li> </ul> </div> <div class="col-md-4 col-sm-6 footer-content"> <h3>About Author</h3> <p class=about-auther>DIT（Doshisha Institute of Technology）は、技術力向上を目的とし同志社／同志社女子大学の学生向けに勉強会やハッカソンを開催する<a href="http://rohm.doshisha.ac.jp/" target=_blank>ローム記念館プロジェクト</a>です。</p> <p class=about-auther>このブログではDITのお知らせ、活動報告のほかに開発、プログラミング等についても書いていきます。</p> <div class=sns-link> <h4>- SNS</h4> <a href="https://twitter.com/dit_rohm/" target=_blank><img src="/images/twitter_logo.png" alt=Twitter></a> <a href="https://facebook.com/dit_rohm/" target=_blank><img src="/images/fb_logo.png" alt=Facebook></a> </div> </div> <div class="col-md-4 col-sm-6 footer-content"> <h3>DIT Website</h3> <p class=about-auther>DITのウェブサイトです。DITについてや参加申し込み、FAQなどはこちらのサイトをご覧ください。</p> <ul> <li><p class=dit-link><a href="https://dit-rohm.com/">HOME</a></p></li> <li><p class=dit-link><a href="https://dit-rohm.com/about.html">ABOUT</a></p></li> <li><p class=dit-link><a href="https://dit-rohm.com/faq.html">FAQ</a></p></li> </ul> </div> </div> <p class=copyright><small>&copy; DIT 2015</small></p> </div> </footer> <script src="/javascripts/all.js"></script> </body> </html>